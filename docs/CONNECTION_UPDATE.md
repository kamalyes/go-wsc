<!--
 * @Author: kamalyes 501893067@qq.com
 * @Date: 2025-11-15 10:56:40
 * @LastEditors: kamalyes 501893067@qq.com
 * @LastEditTime: 2025-11-15 10:58:23
 * @FilePath: \go-wsc\docs\CONNECTION_UPDATE.md
 * @Description: 
 * 
 * Copyright (c) 2025 by kamalyes, All Rights Reserved. 
-->
# WebSocket 客户端测试页面更新

## 🔧 新增功能

### 1. 动态连接地址设置

- ✅ **智能检测**: 自动检测当前页面的协议和域名
- ✅ **手动设置**: 支持自定义 WebSocket 服务器地址
- ✅ **一键连接**: 连接/断开按钮切换
- ✅ **Enter快捷键**: 地址输入框支持 Enter 键连接

### 2. 连接状态管理

- 🟢 **已连接**: 显示绿色状态，按钮变为"断开"
- 🔴 **未连接**: 显示红色状态，按钮为"连接"
- 🔄 **连接中**: 显示加载状态
- ⏱️ **自动重连**: 智能重连策略，最多尝试5次

### 3. 部署兼容性

- 🌐 **本地开发**: 自动使用 `ws://localhost:8080/ws`
- 🚀 **生产部署**: 自动适配 HTTPS → WSS 协议
- 📱 **移动端适配**: 响应式设计支持

## 🛠️ 使用说明

### 本地测试

```bash
# 启动 go-wsc 演示服务器
cd examples/server
go run main.go

# 打开浏览器访问
open http://localhost:8080
```

### 连接到其他服务器

1. 在"服务器地址"输入框中输入目标地址
2. 支持的格式：
   - `ws://localhost:8080/ws`
   - `wss://your-server.com/ws`
   - `ws://192.168.1.100:9090/ws`
3. 点击"连接"按钮或按 Enter 键

### 智能适配示例

| 当前页面地址 | 自动检测的WebSocket地址 |
|-------------|----------------------|
| `http://localhost:8080` | `ws://localhost:8080/ws` |
| `https://your-domain.com` | `wss://your-domain.com/ws` |
| `http://192.168.1.100:3000` | `ws://192.168.1.100:3000/ws` |

## 🔍 测试场景

### 场景1: 本地开发

```
✅ 打开页面，自动填入 ws://localhost:8080/ws
✅ 启动本地服务器，点击连接
✅ 发送消息测试实时通信
```

### 场景2: 远程服务器

```
📝 手动输入远程服务器地址
🔌 点击连接按钮
📡 测试跨域WebSocket通信
```

### 场景3: 网络中断恢复

```
🔌 正常连接状态
📶 断开网络连接
⏱️ 观察自动重连过程 (5次尝试)
🔌 网络恢复后自动重连
```

## 🎯 技术特点

- **零配置**: 开箱即用，自动适配环境
- **智能重连**: 指数退避算法，最大30秒间隔
- **用户友好**: 清晰的状态提示和错误信息
- **键盘支持**: Enter键快捷操作
- **移动优化**: 响应式布局适配各种屏幕

这个更新让 go-wsc 的演示页面既适合本地开发测试，也能轻松部署到生产环境！
